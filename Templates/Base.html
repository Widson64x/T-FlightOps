<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block titulo %}FlightOps{% endblock %}</title>
    
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/Temas.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='CSS/Global.css') }}">
</head>
<body>
    <div class="layout-wrapper">
        <aside class="sidebar">
            <div style="font-size: 1.4rem; font-weight: 700; color: var(--cor-primaria); margin-bottom: 40px; display: flex; align-items: center; gap: 8px;">
                âœˆï¸ FlightOps
            </div>
            
            <nav>
                <a href="/" 
                class="menu-link {{ 'ativo' if request.endpoint == 'Dashboard' else '' }}">
                ğŸ“Š Dashboard
                </a>

                <a href="{{ url_for('Malha.Gerenciar') }}" 
                class="menu-link {{ 'ativo' if request.endpoint and 'Malha' in request.endpoint else '' }}">
                ğŸ›« Malha AÃ©rea
                </a>

                <a href="{{ url_for('Aeroporto.Gerenciar') }}" 
                class="menu-link {{ 'ativo' if request.endpoint and 'Aeroporto' in request.endpoint else '' }}">
                ğŸŒ Aeroportos
                </a>

                <a href="{{ url_for('Cidade.Gerenciar') }}" 
                class="menu-link {{ 'ativo' if request.endpoint and 'Cidade' in request.endpoint else '' }}">
                ğŸ™ï¸ Cidades
                </a>
                
                <a href="#" class="menu-link">ğŸ“… Escalas</a>
                <a href="#" class="menu-link">âš™ï¸ ConfiguraÃ§Ãµes</a>
            </nav>
        </aside>

        <main class="main-content">
            <header class="top-bar">
                <button onclick="AlternarTema()" style="background:none; border:1px solid var(--cor-borda); padding:6px 12px; border-radius:4px; cursor:pointer; color:var(--cor-texto-secundario);">
                    ğŸŒ— Tema
                </button>
                
                <div style="font-size: 0.9rem; font-weight: 500;">
                    {% if current_user.is_authenticated %}
                        {{ current_user.Nome }} 
                    {% else %}
                        UsuÃ¡rio
                    {% endif %}
                    
                    <a href="{{ url_for('Auth.Logout') }}" style="color: #dc3545; text-decoration: none; margin-left: 15px; font-size: 0.85rem;">Sair</a>
                </div>
            </header>

            <div class="conteudo-pagina">
                {% with messages = get_flashed_messages(with_categories=true) %}
                  {% if messages %}
                    {% for category, message in messages %}
                      <div class="alert alert-{{ category }}">{{ message }}</div>
                    {% endfor %}
                  {% endif %}
                {% endwith %}

                {% block conteudo %}{% endblock %}
            </div>
        </main>
    </div>

    <script>
        function AlternarTema() {
            const html = document.documentElement;
            const novoTema = html.getAttribute('data-theme') === 'dark' ? 'light' : 'dark';
            html.setAttribute('data-theme', novoTema);
            localStorage.setItem('tema', novoTema);
        }
        if(localStorage.getItem('tema')) document.documentElement.setAttribute('data-theme', localStorage.getItem('tema'));
    </script>
</body>
</html>